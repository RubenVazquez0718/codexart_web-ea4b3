---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";

const tabs = [
    {
        id: "idSectionOne",
        title: "Digital ERP",
        isActive: true,
    },
    {
        id: "idSectionTwo",
        title: "Diseño de pagina web",
        isActive: false,
    },
    {
        id: "idSectionThree",
        title: "Dominios y correos para empresas",
        isActive: false,
    },
    {
        id: "idSectionFour",
        title: "Soporte técnico",
        isActive: false,
    },
];

const selectedOption = (id: string) => {
    tabs.map((tab) => ({ ...tab, isActive: tab.id === id }));
};
---

<Layout title="Inicio">
    <section class="index-section">
        <div class="index-section-content">
            <h1 class="text-4xl mb-4">Desarrollo de soluciones tecnológicas</h1>
            <p class="text-lg mb-4">
                Soluciones tecnológicas a medida para tu pequeño y mediano
                negocio
            </p>

            <a href="/contactanos" class="cdx-button">
                <i class="fa-solid fa-up-right-from-square px-0 mr-2"></i>
                Contáctanos
            </a>
        </div>
    </section>

    <section class="index-soluciones">
        <h2>Nuestras soluciones</h2>

        <!-- onclick={() => handleTabClick(tab.id)} -->
        <div
            class="bg-gray-200 rounded-full py-2 px-4 flex flex-auto gap-4 justify-around"
            role="tablist"
        >
            {
                tabs.map((tab) => (
                    <a
                        href={`#${tab.id}`}
                        aria-current={tab.isActive ? "page" : "false"}
                        class="whitespace-nowrap py-2 px-4 font-semibold rounded-full border-0 text-gray-700 aria-[current=page]:bg-cyan-600 aria-[current=page]:text-white transition-all duration-300 ease-in-out"
                        role="tab"
                    >
                        {tab.title}
                    </a>
                ))
            }.
        </div>

        <div class="mt-6 rounded-lg border-slate-200 shadow shadow-cyan-200 min-h-96">
            <div id="idSectionOne" class="transition-all ease-in w-full h-full p-6" role="tabpanel">
                <div class="grid grid-cols-1 sm:grid-cols-2 w-full h-full">
                    <div class="w-full h-full p-4">
                        <h2 class="font-semibold"> Sistema de administracion de recursos empresariales (ERP) </h2>
                        <h4 class="text-gray-400 font-medium"> Enterprise resources planing </h4>
                        <div class="mt-4">
                            Informacion Lorem ipsum dolor sit amet consectetur adipisicing elit. Est libero explicabo laudantium?
                            Nemo, voluptate. Ratione, unde in consequuntur repudiandae beatae rem dolores deserunt suscipit
                            ipsa ut sit placeat dolore magnam.
                        </div>
                    </div>
                    <div class="flex flex-grow w-full h-full index-soluciones-image-sectionOne"></div>
                </div>
            </div>

            <div id="idSectionTwo" class="hidden transition-all ease-in-out w-full h-full p-6" role="tabpanel">
                <div class="grid grid-cols-1 sm:grid-cols-2 w-full h-full">
                    <div class="flex flex-grow w-full h-full index-soluciones-image-sectionOne"></div>
                    <div class="w-full h-full p-4">
                        <h2 class="font-semibold"> Sistema de administracion de recursos empresariales (ERP) </h2>
                        <h4 class="text-gray-400 font-medium"> Enterprise resources planing </h4>
                        <div class="mt-4">
                            Informacion Lorem ipsum dolor sit amet consectetur adipisicing elit. Est libero explicabo laudantium?
                            Nemo, voluptate. Ratione, unde in consequuntur repudiandae beatae rem dolores deserunt suscipit
                            ipsa ut sit placeat dolore magnam.
                        </div>
                    </div>
                </div>
            </div>

            <div id="idSectionThree" class="hidden transition-all ease-in-out w-full h-full p-6" role="tabpanel">
                <div class="grid grid-cols-1 sm:grid-cols-2 w-full h-full">
                    <div class="w-full h-full">
                        <h2 class="font-semibold"> Sistema de administracion de recursos empresariales (ERP) </h2>
                        <h4 class="text-gray-400 font-medium"> Enterprise resources planing </h4>
                        <div class="mt-4">
                            Informacion Lorem ipsum dolor sit amet consectetur adipisicing elit. Est libero explicabo laudantium?
                            Nemo, voluptate. Ratione, unde in consequuntur repudiandae beatae rem dolores deserunt suscipit
                            ipsa ut sit placeat dolore magnam.
                        </div>
                    </div>
                    <div class="flex flex-grow w-full h-full index-soluciones-image-sectionOne"></div>
                </div>
            </div>

            <div id="idSectionFour" class="hidden transition-all ease-in-out w-full h-fulll p-6" role="tabpanel">
                <div class="grid grid-cols-1 sm:grid-cols-2 w-full h-full">
                    <div class="w-full h-full">
                        <h2 class="font-semibold"> Sistema de administracion de recursos empresariales (ERP) </h2>
                        <h4 class="text-gray-400 font-medium"> Enterprise resources planing </h4>
                        <div class="mt-4">
                            Informacion Lorem ipsum dolor sit amet consectetur adipisicing elit. Est libero explicabo laudantium?
                            Nemo, voluptate. Ratione, unde in consequuntur repudiandae beatae rem dolores deserunt suscipit
                            ipsa ut sit placeat dolore magnam.
                        </div>
                    </div>
                    <div class="flex flex-grow w-full h-full index-soluciones-image-sectionOne"></div>
                </div>
            </div>

        </div>
    </section>
</Layout>

<script>
    // Simple tab switching without React
    document.querySelectorAll('[role="tab"]').forEach((tab) => {
        tab.addEventListener("click", (e) => {
            e.preventDefault();
            const targetValue = tab.getAttribute("href")?.substring(1);
            const targetId = targetValue ?? "";

            // Hide all tab panels
            document.querySelectorAll('[role="tabpanel"]').forEach((panel) => {
                if (panel.id == targetId) {
                    panel.classList.remove("hidden");
                } else {
                    panel.classList.add("hidden");
                }
            });

            // Show target panel
            document.getElementById(targetId)?.classList.remove("hidden");

            // Update active tab styling
            document.querySelectorAll('[role="tab"]').forEach((t) => {
                t.setAttribute("aria-current", "false");
            });
            tab.setAttribute("aria-current", "page");
        });
    });
</script>
