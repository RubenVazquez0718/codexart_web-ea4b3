---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";

const tabs = [
    {
        id: "idSectionOne",
        title: "Digital ERP",
        isActive: true,
    },
    {
        id: "idSectionTwo",
        title: "Diseño de pagina web",
        isActive: false,
    },
    {
        id: "idSectionThree",
        title: "Dominios y correos para empresas",
        isActive: false,
    },
    {
        id: "idSectionFour",
        title: "Soporte técnico",
        isActive: false,
    },
];

const selectedOption = (id: string) => {
    tabs.map((tab) => ({ ...tab, isActive: tab.id === id }));
};
---

<Layout title="Inicio">
    <section class="index-section">
        <div class="index-section-content">
            <h1 class="text-4xl mb-4">Desarrollo de soluciones tecnológicas</h1>
            <p class="text-lg mb-4">
                Soluciones tecnológicas a medida para tu pequeño y mediano
                negocio
            </p>

            <a href="/contactanos" class="cdx-button">
                <i class="fa-solid fa-up-right-from-square px-0 mr-2"></i>
                Contáctanos
            </a>
        </div>
    </section>

    <section class="index-soluciones">
        <h2>Nuestras soluciones</h2>

        <!-- onclick={() => handleTabClick(tab.id)} -->
        <div
            class="bg-gray-200 rounded-full py-2 px-4 flex flex-auto gap-4 justify-around"
            role="tablist"
        >
            {
                tabs.map((tab) => (
                    <a
                        href={`#${tab.id}`}
                        aria-current={tab.isActive ? "page" : "false"}
                        class="whitespace-nowrap py-2 px-4 font-semibold rounded-full border-0 text-gray-700 aria-[current=page]:bg-cyan-600 aria-[current=page]:text-white transition-all duration-300 ease-in-out"
                        role="tab"
                    >
                        {tab.title}
                    </a>
                ))
            }.
        </div>

        <div
            class="mt-2 border border-slate-200 shadow shadow-cyan-200 min-h-96"
        >
            {
                tabs.map((tab, index) => (
                    <div
                        class={
                            tab.isActive && tab.id === "idSectionOne"
                                ? "block"
                                : "hidden"
                        }
                        role="tabpanel"
                    >
                        asdasd
                    </div>
                ))
            }
        </div>
    </section>
</Layout>

<script>
    // Simple tab switching without React
    document.querySelectorAll('[role="tab"]').forEach((tab) => {
        tab.addEventListener("click", (e) => {
            e.preventDefault();
            const targetValue = tab.getAttribute("href")?.substring(1);
            const targetId = targetValue ?? "";

            // Hide all tab panels
            document.querySelectorAll('[role="tabpanel"]').forEach((panel) => {
                panel.classList.add("hidden");
            });

            // Show target panel
            document.getElementById(targetId)?.classList.remove("hidden");

            // Update active tab styling
            document.querySelectorAll('[role="tab"]').forEach((t) => {
                t.setAttribute("aria-current", "false");
            });
            tab.setAttribute("aria-current", "page");
        });
    });
</script>
